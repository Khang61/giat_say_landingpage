<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titanium Cash Pay</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@500;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --font-display: 'Inter', sans-serif;
            --font-tech: 'JetBrains Mono', monospace;
            --color-dark: #111;
            --color-accent: #0055ff;
            --color-success: #00cc66;
            --color-warning: #ffaa00;
        }

        body {
            font-family: var(--font-display);
            background-color: #f0f2f5;
            color: var(--color-dark);
        }

        /* --- INDUSTRIAL SHAPES --- */
        .chamfer-lg {
            clip-path: polygon(
                20px 0, 100% 0, 
                100% calc(100% - 20px), calc(100% - 20px) 100%, 
                0 100%, 0 20px
            );
        }
        .chamfer-sm {
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
        }

        /* --- UTILS --- */
        .font-tech { font-family: var(--font-tech); }
        .btn-press { transition: transform 0.1s; }
        .btn-press:active { transform: scale(0.95); }

        /* --- ANIMATIONS --- */
        @keyframes pulse-slot {
            0% { box-shadow: 0 0 0 0 rgba(0, 85, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 85, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 85, 255, 0); }
        }
        .slot-active {
            animation: pulse-slot 2s infinite;
        }

        @keyframes insert-bill {
            0% { transform: translateY(100%) scale(0.8); opacity: 0; }
            50% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-150%) scale(0.9); opacity: 0; }
        }
        .animate-bill {
            animation: insert-bill 0.8s ease-in-out forwards;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS ---
        const Icon = ({ className, children }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="square" strokeLinejoin="miter" className={className}>{children}</svg>
        );
        const ChevronLeft = () => (<Icon className="w-5 h-5"><polyline points="15 18 9 12 15 6"/></Icon>);
        const Banknote = () => (<Icon className="w-6 h-6"><rect x="2" y="6" width="20" height="12" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/></Icon>);
        const ArrowDown = () => (<Icon className="w-8 h-8"><line x1="12" y1="5" x2="12" y2="19"/><polyline points="19 12 12 19 5 12"/></Icon>);
        const CheckCircle = () => (<Icon className="w-16 h-16"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>);

        // --- COMPONENTS ---

        const Header = () => (
            <header className="flex justify-between items-center p-5 bg-white border-b-2 border-slate-200 sticky top-0 z-50">
                <div className="flex items-center gap-3">
                    <div className="w-10 h-10 bg-[#111] text-white flex items-center justify-center font-black text-xl chamfer-sm border-2 border-[#111]">L</div>
                    <div className="leading-none">
                        <h1 className="font-black text-xl tracking-tighter text-[#111]">LAUNDRY<span className="text-slate-400">OS</span></h1>
                    </div>
                </div>
                <div className="bg-slate-100 border border-slate-300 px-3 py-1 chamfer-sm">
                    <span className="font-tech font-bold text-sm text-slate-700">CASH_MOD</span>
                </div>
            </header>
        );

        const CashScreen = () => {
            const TOTAL_DUE = 45000;
            const [inserted, setInserted] = useState(0);
            const [lastBill, setLastBill] = useState(null);
            const [isSuccess, setIsSuccess] = useState(false);

            const remaining = Math.max(0, TOTAL_DUE - inserted);
            const change = Math.max(0, inserted - TOTAL_DUE);

            // Simulate inserting a bill
            const insertBill = (amount) => {
                if (isSuccess) return;
                setLastBill(amount); // Trigger animation
                setTimeout(() => setLastBill(null), 800); // Reset animation
                
                setInserted(prev => {
                    const newVal = prev + amount;
                    if (newVal >= TOTAL_DUE) {
                        setTimeout(() => setIsSuccess(true), 1000);
                    }
                    return newVal;
                });
            };

            if (isSuccess) {
                return (
                    <div className="flex-1 flex flex-col items-center justify-center p-5 text-center animate-[fadeIn_0.5s_ease-out]">
                        <div className="w-32 h-32 bg-[#00cc66] text-white flex items-center justify-center rounded-full mb-8 shadow-2xl shadow-green-500/40">
                            <CheckCircle />
                        </div>
                        <h2 className="font-black text-4xl uppercase text-[#111] mb-2 tracking-tight">Đủ Tiền</h2>
                        
                        {change > 0 && (
                            <div className="bg-yellow-50 border-2 border-yellow-400 p-4 chamfer-sm mb-6 animate-bounce">
                                <p className="font-bold text-yellow-700 text-xs uppercase">Vui lòng nhận tiền thừa</p>
                                <p className="font-tech font-black text-2xl text-[#111]">{change.toLocaleString()}đ</p>
                            </div>
                        )}

                        <p className="font-tech text-slate-500 font-bold mb-8">Bắt đầu giặt...</p>
                        <button onClick={() => window.location.reload()} className="bg-[#111] text-white px-8 py-4 font-black uppercase chamfer-sm hover:bg-[#333] transition-colors w-full max-w-xs">
                            Quay Về
                        </button>
                    </div>
                );
            }

            return (
                <div className="flex-1 flex flex-col p-5 max-w-md mx-auto w-full h-full overflow-hidden">
                    
                    {/* Top Bar */}
                    <div className="flex justify-between items-center mb-6">
                        <button className="flex items-center gap-2 text-slate-500 hover:text-[#111] font-bold text-xs uppercase transition-colors">
                            <ChevronLeft /> Hủy Bỏ
                        </button>
                        <div className="flex items-center gap-2">
                            <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                            <span className="font-tech text-xs font-bold text-slate-500">ACCEPTING CASH</span>
                        </div>
                    </div>

                    {/* DIGITAL DISPLAY PANEL */}
                    <div className="bg-[#1a1a1a] p-6 chamfer-lg border-b-4 border-[#333] shadow-2xl relative overflow-hidden mb-6">
                        {/* Glass Glare */}
                        <div className="absolute top-0 right-0 w-full h-full bg-gradient-to-bl from-white/5 to-transparent pointer-events-none"></div>
                        
                        <div className="flex justify-between items-end mb-4 border-b border-gray-700 pb-4">
                            <div>
                                <p className="font-tech text-[10px] text-gray-500 font-bold uppercase mb-1">Total Amount</p>
                                <p className="font-tech text-2xl font-bold text-white tracking-wider opacity-60">{TOTAL_DUE.toLocaleString()}đ</p>
                            </div>
                            <div className="text-right">
                                <p className="font-tech text-[10px] text-gray-500 font-bold uppercase mb-1">Inserted</p>
                                <p className="font-tech text-2xl font-bold text-[#00cc66] tracking-wider">
                                    {inserted.toLocaleString()}<span className="text-sm">đ</span>
                                </p>
                            </div>
                        </div>

                        <div className="text-center py-2">
                            <p className="font-tech text-xs text-[#0055ff] font-bold uppercase animate-pulse mb-1">
                                {remaining > 0 ? 'Vui lòng nạp thêm' : 'Đang xử lý...'}
                            </p>
                            <div className="font-tech text-5xl font-black text-white tracking-tighter">
                                {remaining > 0 ? remaining.toLocaleString() : '0'}
                                <span className="text-xl text-gray-500 ml-2">đ</span>
                            </div>
                        </div>
                    </div>

                    {/* BILL ACCEPTOR VISUAL */}
                    <div className="flex-1 flex flex-col items-center justify-center relative min-h-[200px]">
                        
                        {/* The Slot Machine Graphic */}
                        <div className="relative w-64 bg-slate-200 border-2 border-slate-300 chamfer-sm p-4 flex flex-col items-center shadow-inner">
                            <p className="font-tech text-[10px] font-bold text-slate-400 mb-2 uppercase tracking-widest">Bill Acceptor</p>
                            
                            {/* LED Light Bar */}
                            <div className="w-32 h-2 bg-slate-300 rounded-full mb-3 overflow-hidden">
                                <div className="w-full h-full bg-gradient-to-r from-transparent via-[#00cc66] to-transparent animate-[shimmer_1s_infinite]"></div>
                            </div>

                            {/* The Slot */}
                            <div className="w-48 h-4 bg-black rounded-full border-b-2 border-slate-600 relative slot-active flex justify-center overflow-visible z-10">
                                {/* Bill Animation */}
                                {lastBill && (
                                    <div className="absolute bottom-0 w-32 h-16 bg-blue-100 border border-blue-300 flex items-center justify-center text-blue-800 font-bold text-xs shadow-lg animate-bill z-0">
                                        {lastBill.toLocaleString()}đ
                                    </div>
                                )}
                            </div>

                            <div className="mt-2 text-slate-400">
                                <ArrowDown />
                            </div>
                        </div>

                        {/* Accept Info */}
                        <div className="mt-4 flex gap-2">
                            {['10k', '20k', '50k', '100k', '200k'].map(note => (
                                <span key={note} className="bg-white border border-slate-200 text-slate-400 text-[10px] font-bold px-2 py-1 chamfer-sm">{note}</span>
                            ))}
                        </div>
                    </div>

                    {/* SIMULATOR CONTROLS (Dev Tools for Demo) */}
                    <div className="mt-auto bg-white border-t-2 border-slate-200 -mx-5 -mb-5 p-5">
                        <p className="text-xs font-bold text-slate-400 uppercase mb-3 text-center">▼ Nạp thử tiền (Demo Simulator) ▼</p>
                        <div className="grid grid-cols-4 gap-2">
                            <button onClick={() => insertBill(10000)} className="bg-slate-100 hover:bg-green-100 text-slate-700 hover:text-green-700 border border-slate-300 font-bold py-3 chamfer-sm btn-press text-sm">10k</button>
                            <button onClick={() => insertBill(20000)} className="bg-slate-100 hover:bg-blue-100 text-slate-700 hover:text-blue-700 border border-slate-300 font-bold py-3 chamfer-sm btn-press text-sm">20k</button>
                            <button onClick={() => insertBill(50000)} className="bg-slate-100 hover:bg-pink-100 text-slate-700 hover:text-pink-700 border border-slate-300 font-bold py-3 chamfer-sm btn-press text-sm">50k</button>
                            <button onClick={() => insertBill(100000)} className="bg-slate-100 hover:bg-yellow-100 text-slate-700 hover:text-yellow-700 border border-slate-300 font-bold py-3 chamfer-sm btn-press text-sm">100k</button>
                        </div>
                    </div>

                </div>
            );
        };

        const App = () => {
            return (
                <div className="max-w-md mx-auto min-h-screen bg-[#f0f2f5] border-x border-slate-300 relative shadow-2xl flex flex-col font-display">
                    <Header />
                    <CashScreen />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>